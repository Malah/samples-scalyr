// Dashboard to display system-wide resource metrics for a Windows server.

    {

      // duration: "4h",

      "autoPercentiles": false,

      parameters : [
        {
            "name" : "serverHost",
            "values" : [ {"label": "Average (all servers)", "value": "*"}, "__serverHostsQ['monitor:windows_system_metrics']" ] // lists all hosts running the windows system metrics monitor
        }
      ],

    graphs: [
        {
            label: "CPU usage",
            graphStyle: "stacked",
            plots: [
                {
                    filter: "$source == 'tsdb' && monitor='windows_system_metrics' && $serverHost=#serverHost# && $metric = 'winsys.cpu_rate' && $type = 'idle'",
                    facet: "mean(value)",
                    label: "Idle"
                },
                {
                    filter: "$source == 'tsdb' && monitor='windows_system_metrics' && $serverHost=#serverHost# && $metric = 'winsys.cpu_rate' && $type = 'system'",
                    facet: "mean(value)",
                    label: "System"
                },
                {
                    filter: "$source == 'tsdb' && monitor='windows_system_metrics' && $serverHost=#serverHost# && $metric = 'winsys.cpu_rate' && $type = 'user'",
                    facet: "mean(value)",
                    label: "User"
                }

            ]
        },
        {
            label: "Memory usage",
            graphStyle: "stacked",
            plots: [
                {
                    facet: "value",
                    filter: "$source == 'tsdb' && monitor='windows_system_metrics' && $serverHost=#serverHost# && $metric = 'winsys.memory.available' && $type = 'physical'",
                    label: "Available bytes"
                },
                {
                    facet: "value",
                    filter: "$source == 'tsdb' && monitor='windows_system_metrics' && $serverHost=#serverHost# && $metric = 'winsys.memory.used' && $type = 'physical'",
                    label: "Used bytes"
                }
            ]
        },
        {
            label: "Network bandwidth",
            graphStyle: "stacked",
            plots: [
                {
                    facet: "value",
                    filter: "$source == 'tsdb' && monitor='windows_system_metrics' && $serverHost=#serverHost# && $metric = 'winsys.network.bytes_rate' && $direction = 'sent'",
                    label: "Sent bytes per second"
                },
                {
                    facet: "value",
                    filter: "$source == 'tsdb' && monitor='windows_system_metrics' && $serverHost=#serverHost# && $metric = 'winsys.network.bytes_rate' && $direction = 'recv'",
                    label: "Received bytes per second"
                }
            ]
        },
        {
            label: "Disk bandwidth",
            graphStyle: "stacked",
            plots: [
                {
                    facet: "value",
                    filter: "$source == 'tsdb' && monitor='windows_system_metrics' && $serverHost=#serverHost# && $metric = 'winsys.disk.io.bytes_rate' type=\"write\"",
                    label: "Write bytes per second"
                },
                {
                    facet: "value",
                    filter: "$source == 'tsdb' && monitor='windows_system_metrics' && $serverHost=#serverHost# && $metric = 'winsys.disk.io.bytes_rate' type=\"read\"",
                    label: "Read bytes per second"
                }
            ]
        },
        {
            label: "Disk requests",
            plots: [
                {
                    facet: "value",
                    filter: "$source == 'tsdb' && monitor='windows_system_metrics' && $serverHost=#serverHost# && $metric = 'winsys.disk.io.ops_rate' type=\"write\"",
                    label: "Write requests per second"
                },
                {
                    facet: "value",
                    filter: "$source == 'tsdb' && monitor='windows_system_metrics' && $serverHost=#serverHost# && $metric = 'winsys.disk.io.ops_rate' type=\"read\"",
                    label: "Read requests per second"
                }
            ]
        },
        {
            label: "Disk usage",
            graphStyle: "stacked",
            plots: [
                {
                    facet: "value",
                    filter: "$source == 'tsdb' && monitor='windows_system_metrics' && $serverHost=#serverHost# && $metric = 'winsys.disk.usage.free' && $partition = 'C:\\\\'",
                    label: "Free bytes (C:\\\\ Drive)"
                },
                {
                    facet: "value",
                    filter: "$source == 'tsdb' && monitor='windows_system_metrics' && $serverHost=#serverHost# && $metric = 'winsys.disk.usage.used' && $partition = 'C:\\\\'",
                    label: "Used bytes (C:\\\\ Drive)"
                }
            ]
        }
    ]
    }
